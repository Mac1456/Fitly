<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitly - Your Wellness Companion</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="logo-icon">üåü</span>
                    Fitly
                </h1>
                <nav class="main-nav" id="mainNav" style="display: none;">
                    <button class="nav-btn active" id="navAiAssistant" onclick="utils.switchScreen('aiassistant')">
                        <span class="nav-icon">ü§ñ</span>
                        <span class="nav-text">Fitly Chat</span>
                    </button>
                    <button class="nav-btn" id="navDashboard" onclick="utils.switchScreen('dashboard')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Dashboard</span>
                    </button>
                    <button class="nav-btn" id="navProfile" onclick="utils.showProfileSettings()">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Settings</span>
                    </button>
                </nav>
                <div class="user-greeting" id="userGreeting">
                    Welcome back!
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Onboarding Screen (shown initially) -->
            <section id="onboardingScreen" class="screen active">
                <div class="onboarding-container">
                    <div class="welcome-message">
                        <h2>Welcome to Fitly! üëã</h2>
                        <p>Your flexible wellness companion that meets you where you are. Let's get to know you better!</p>
                    </div>
                    
                    <!-- Authentication Section -->
                    <div id="authSection" class="auth-section">
                        <div class="auth-toggle">
                            <button id="signInModeBtn" class="auth-toggle-btn active">Sign In</button>
                            <button id="signUpModeBtn" class="auth-toggle-btn">Sign Up</button>
                        </div>
                        
                        <!-- Sign In Form -->
                        <form id="signInForm" class="auth-form active">
                            <div class="form-group">
                                <label for="signInEmail">Email</label>
                                <input type="email" id="signInEmail" name="email" placeholder="your.email@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="signInPassword">Password</label>
                                <input type="password" id="signInPassword" name="password" placeholder="Your password" required>
                            </div>
                            <button type="submit" class="cta-button">
                                <span class="btn-icon">üîë</span>
                                Sign In
                            </button>
                        </form>
                        
                        <!-- Sign Up Form -->
                        <form id="signUpForm" class="auth-form">
                            <div class="form-group">
                                <label for="signUpEmail">Email</label>
                                <input type="email" id="signUpEmail" name="email" placeholder="your.email@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="signUpPassword">Password</label>
                                <input type="password" id="signUpPassword" name="password" placeholder="Choose a password (min 6 characters)" minlength="6" required>
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" minlength="6" required>
                            </div>
                            <button type="submit" class="cta-button">
                                <span class="btn-icon">‚ú®</span>
                                Create Account
                            </button>
                        </form>
                    </div>
                    
                    <!-- Profile Setup Section (hidden initially) -->
                    <div id="profileSetupSection" class="profile-setup-section hidden">
                        <div class="setup-message">
                            <h3>Great! Now let's set up your profile üéØ</h3>
                            <p>This helps us personalize your wellness journey.</p>
                        </div>
                        
                        <!-- Onboarding Mode Toggle -->
                        <div class="onboarding-toggle">
                            <button id="chatModeBtn" class="toggle-btn">
                                <span class="btn-icon">üí¨</span>
                                Chat with Coach
                            </button>
                            <button id="formModeBtn" class="toggle-btn active">
                                <span class="btn-icon">üìù</span>
                                Quick Form
                            </button>
                        </div>
                    
                    <!-- AI Chat Interface -->
                    <div id="onboardingChat" class="onboarding-chat">
                        <div class="chat-container">
                            <div class="chat-messages" id="chatMessages">
                                <div class="message ai-message">
                                    <div class="message-avatar">ü§ñ</div>
                                    <div class="message-content">
                                                                            <div class="message-text" id="initialAiMessage">
                                        Hi there! I'm Fitly, your wellness coach. Let's have a friendly chat to set up your profile. What should I call you?
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="chatInput" placeholder="Type your message..." disabled>
                                <button id="sendChatBtn" class="send-btn" disabled>
                                    <span>Send</span>
                                </button>
                            </div>
                            <div class="chat-status" id="chatStatus">
                                <span class="status-indicator">‚ö†Ô∏è</span>
                                <span>OpenAI API key needed for chat mode</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Form Interface -->
                    <form id="onboardingForm" class="onboarding-form active">
                        <div class="form-group">
                            <label for="userName">What should we call you?</label>
                            <input type="text" id="userName" name="userName" placeholder="Enter your name" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="currentWeight">Current Weight</label>
                                <div class="input-with-unit">
                                    <input type="number" id="currentWeight" name="currentWeight" placeholder="150" step="0.1" required>
                                    <select id="weightUnit" name="weightUnit">
                                        <option value="lbs">lbs</option>
                                        <option value="kg">kg</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="height">Height</label>
                                <div class="height-input-group">
                                    <select id="heightUnit" name="heightUnit" onchange="toggleHeightInputs()">
                                        <option value="imperial">Feet & Inches</option>
                                        <option value="metric">Centimeters</option>
                                    </select>
                                    <div class="height-inputs">
                                        <div class="imperial-height" id="imperialHeight">
                                            <div class="input-with-unit">
                                                <input type="number" id="heightFeet" name="heightFeet" placeholder="5" min="3" max="8" required>
                                                <span class="unit-label">ft</span>
                                            </div>
                                            <div class="input-with-unit">
                                                <input type="number" id="heightInches" name="heightInches" placeholder="10" min="0" max="11" required>
                                                <span class="unit-label">in</span>
                                            </div>
                                        </div>
                                        <div class="metric-height" id="metricHeight" style="display: none;">
                                            <div class="input-with-unit">
                                                <input type="number" id="heightCm" name="heightCm" placeholder="170" min="120" max="250">
                                                <span class="unit-label">cm</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="age">Age</label>
                                <input type="number" id="age" name="age" placeholder="25" min="13" max="120" required>
                            </div>

                            <div class="form-group">
                                <label for="gender">Gender</label>
                                <select id="gender" name="gender" required>
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="goalWeight">Goal Weight (optional)</label>
                            <div class="input-with-unit">
                                <input type="number" id="goalWeight" name="goalWeight" placeholder="140" step="0.1">
                                <span class="unit-display" id="goalWeightUnit">lbs</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="activityLevel">How would you describe your activity level?</label>
                            <select id="activityLevel" name="activityLevel" required>
                                <option value="">Select your activity level</option>
                                <option value="sedentary">Mostly sedentary (desk job, little exercise)</option>
                                <option value="lightly-active">Lightly active (light exercise 1-3 days/week)</option>
                                <option value="moderately-active">Moderately active (moderate exercise 3-5 days/week)</option>
                                <option value="very-active">Very active (hard exercise 6-7 days/week)</option>
                                <option value="inconsistent">Inconsistent (I go through active and less active phases)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="primaryGoal">What's your main focus right now?</label>
                            <select id="primaryGoal" name="primaryGoal" required>
                                <option value="">Select your primary goal</option>
                                <option value="lose-fat">Lose fat</option>
                                <option value="build-muscle">Build muscle</option>
                                <option value="maintain">Maintain current weight</option>
                                <option value="general-health">General health and wellness</option>
                                <option value="just-tracking">Just want to track my habits</option>
                            </select>
                        </div>

                            <button type="submit" class="cta-button">
                                Let's Get Started! üöÄ
                            </button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- AI Assistant Screen (new comprehensive chat-based logging) -->
            <section id="aiAssistantScreen" class="screen">
                <div class="ai-assistant-container">
                    <div class="assistant-header">
                        <h2>ü§ñ Chat with Fitly</h2>
                        <p>Your personal wellness companion! I can help you log meals, track activities, monitor progress, and give you personalized insights.</p>
                        <div class="quick-actions">
                            <button class="quick-action-btn" onclick="aiAssistant.quickLog('meal')">
                                <span>üçΩÔ∏è</span> Log Meal
                            </button>
                            <button class="quick-action-btn" onclick="aiAssistant.quickLog('activity')">
                                <span>üèÉ</span> Log Activity
                            </button>
                            <button class="quick-action-btn" onclick="aiAssistant.quickLog('weight')">
                                <span>‚öñÔ∏è</span> Log Weight
                            </button>
                            <button class="quick-action-btn" onclick="aiAssistant.quickLog('progress')">
                                <span>üìà</span> Check Progress
                            </button>
                        </div>
                    </div>

                    <div class="assistant-main">
                        <div class="chat-section">
                            <div class="chat-messages" id="assistantChatMessages">
                                <div class="message ai-message">
                                    <div class="message-avatar">ü§ñ</div>
                                    <div class="message-content">
                                        <div class="message-text">
                                            Hi! I'm Fitly, your personal wellness companion. I can help you:
                                            <br>‚Ä¢ Log meals with automatic nutrition analysis
                                            <br>‚Ä¢ Track workouts and activities
                                            <br>‚Ä¢ Monitor weight and body measurements
                                            <br>‚Ä¢ Analyze your progress and trends
                                            <br>‚Ä¢ Set and adjust goals
                                            <br>‚Ä¢ Get personalized recommendations
                                            <br><br>What would you like to do today?
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="assistantChatInput" placeholder="Chat with Fitly... 'I had eggs for breakfast', 'log my 30min run', 'how am I doing today?'" />
                                <button id="assistantSendBtn" class="send-btn">
                                    <span>Send</span>
                                </button>
                            </div>
                            <div class="chat-status" id="assistantChatStatus">
                                <span class="status-indicator">‚úÖ</span>
                                <span>Fitly is ready to help!</span>
                            </div>
                        </div>

                        <div class="live-stats-panel">
                            <h3>üìä Today's Summary</h3>
                            <div class="live-stats" id="liveStats">
                                <div class="stat-item">
                                    <span class="stat-label">Calories</span>
                                    <span class="stat-value" id="liveCalories">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Protein</span>
                                    <span class="stat-value" id="liveProtein">0g</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Activities</span>
                                    <span class="stat-value" id="liveActivities">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Weight</span>
                                    <span class="stat-value" id="liveWeight">--</span>
                                </div>
                            </div>
                            
                            <div class="recent-logs" id="recentLogs">
                                <h4>Recent Activity</h4>
                                <div class="log-list" id="recentLogsList">
                                    <p class="no-logs">No recent activity</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Dashboard Screen -->
            <section id="dashboardScreen" class="screen">
                <div class="dashboard-container">
                    <!-- Quick Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üî•</div>
                            <div class="stat-content">
                                <h3>Today's Calories</h3>
                                <div class="stat-value" id="todayCalories">0</div>
                                <div class="stat-goal">Goal: <span id="calorieGoal">2000</span></div>
                            </div>
                        </div>

                        <div class="stat-card protein-card">
                            <div class="stat-icon">üí™</div>
                            <div class="stat-content">
                                <h3>Protein</h3>
                                <div class="stat-value" id="todayProtein">0g</div>
                                <div class="stat-goal">Goal: <span id="proteinGoal">120g</span></div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">‚öñÔ∏è</div>
                            <div class="stat-content">
                                <h3>Current Weight</h3>
                                <div class="stat-value" id="currentWeightDisplay">150 lbs</div>
                                <div class="stat-trend" id="weightTrend">No recent data</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-content">
                                <h3>Today's Activity</h3>
                                <div class="activity-checkboxes">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="workedOutToday">
                                        <span class="checkmark"></span>
                                        Worked out
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="walkedToday">
                                        <span class="checkmark"></span>
                                        Walked/Light activity
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="action-btn primary" id="logMealBtn">
                            <span class="btn-icon">üçΩÔ∏è</span>
                            Log Meal
                        </button>
                        <button class="action-btn secondary" id="voiceLogBtn">
                            <span class="btn-icon">üé§</span>
                            Voice Log
                        </button>

                        <button class="action-btn secondary" id="updateWeightBtn">
                            <span class="btn-icon">‚öñÔ∏è</span>
                            Update Weight
                        </button>
                    </div>

                    <!-- Macro Breakdown -->
                    <div class="macro-section">
                        <h3>Today's Nutrition</h3>
                        <div class="macro-grid">
                            <div class="macro-item">
                                <div class="macro-label">Carbs</div>
                                <div class="macro-value" id="todayCarbs">0g</div>
                                <div class="macro-bar">
                                    <div class="macro-progress" id="carbsProgress" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-label">Fats</div>
                                <div class="macro-value" id="todayFats">0g</div>
                                <div class="macro-bar">
                                    <div class="macro-progress" id="fatsProgress" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-label">Sugar</div>
                                <div class="macro-value" id="todaySugar">0g</div>
                                <div class="macro-bar">
                                    <div class="macro-progress" id="sugarProgress" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Meals -->
                    <div class="meals-section">
                        <h3>Today's Meals</h3>
                        <div id="todaysMealsList" class="meals-list">
                            <div class="no-meals-message">
                                <div class="no-meals-icon">üçΩÔ∏è</div>
                                <p>No meals logged today</p>
                                <p class="no-meals-subtitle">Click "Log Meal" to get started!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Modals -->
        <div id="mealModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Log Your Meal</h3>
                    <button class="close-btn" id="closeMealModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="mealForm">
                        <div class="form-group">
                            <label for="mealDescription">What did you eat?</label>
                            <textarea id="mealDescription" name="mealDescription" placeholder="Describe your meal... (e.g., grilled chicken breast with rice and broccoli)" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="mealTime">When did you eat?</label>
                            <input type="datetime-local" id="mealTime" name="mealTime" required>
                        </div>
                        <button type="submit" class="cta-button">Add Meal</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Voice Recording Modal -->
        <div id="voiceRecordingModal" class="modal">
            <div class="modal-content voice-modal">
                <div class="modal-header">
                    <h3>üé§ Voice Recording</h3>
                    <button class="close-btn" id="closeVoiceModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="recording-status">
                        <div class="recording-indicator">
                            <div class="pulse-dot" id="recordingPulseDot"></div>
                            <span id="recordingStatusText">Ready to record</span>
                        </div>
                        <div class="recording-timer" id="recordingTimer">0:00</div>
                    </div>
                    
                    <div class="transcription-container">
                        <div class="transcription-label">What you're saying:</div>
                        <div class="transcription-text">
                            <div id="finalTranscript" class="final-transcript"></div>
                            <div id="interimTranscript" class="interim-transcript"></div>
                        </div>
                    </div>
                    
                    <div class="recording-controls">
                        <button class="recording-btn start-btn" id="startStopRecordingBtn">
                            <span class="btn-icon" id="startStopIcon">üéôÔ∏è</span>
                            <span id="startStopText">Start Recording</span>
                        </button>
                        <button class="recording-btn save-btn" id="saveRecordingBtn" disabled>
                            <span class="btn-icon">üíæ</span>
                            Save
                        </button>
                        <button class="recording-btn cancel-btn" id="cancelRecordingBtn">
                            <span class="btn-icon">‚ùå</span>
                            Cancel
                        </button>
                    </div>
                    
                    <div class="recording-help">
                        <p>üí° Speak clearly and describe your meal. For example:</p>
                        <p class="help-example">"I had a chicken caesar salad with grilled chicken breast, romaine lettuce, parmesan cheese, and caesar dressing"</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Settings Modal -->
        <div id="profileModal" class="modal">
            <div class="modal-content large-modal">
                <div class="modal-header">
                    <h3>‚öôÔ∏è Profile Settings</h3>
                    <button class="close-btn" id="closeProfileModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="profile">üë§ Profile</button>
                        <button class="tab-btn" data-tab="goals">üéØ Goals</button>
                        <button class="tab-btn" data-tab="preferences">‚öôÔ∏è Preferences</button>
                        <button class="tab-btn" data-tab="account">üîê Account</button>
                    </div>
                    
                    <!-- Profile Tab -->
                    <div class="tab-content active" id="profileTab">
                        <form id="profileUpdateForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="updateUserName">Name</label>
                                    <input type="text" id="updateUserName" name="userName" placeholder="Your name">
                                </div>
                                <div class="form-group">
                                    <label for="updateAge">Age</label>
                                    <input type="number" id="updateAge" name="age" placeholder="25" min="13" max="120">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="updateCurrentWeight">Current Weight</label>
                                    <div class="input-with-unit">
                                        <input type="number" id="updateCurrentWeight" name="currentWeight" placeholder="150" step="0.1">
                                        <select id="updateWeightUnit" name="weightUnit">
                                            <option value="lbs">lbs</option>
                                            <option value="kg">kg</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="updateHeight">Height</label>
                                    <div class="height-input-group">
                                        <select id="updateHeightUnit" name="heightUnit" onchange="toggleUpdateHeightInputs()">
                                            <option value="imperial">Feet & Inches</option>
                                            <option value="metric">Centimeters</option>
                                        </select>
                                        <div class="height-inputs">
                                            <div class="imperial-height" id="updateImperialHeight">
                                                <div class="input-with-unit">
                                                    <input type="number" id="updateHeightFeet" name="heightFeet" placeholder="5" min="3" max="8">
                                                    <span class="unit-label">ft</span>
                                                </div>
                                                <div class="input-with-unit">
                                                    <input type="number" id="updateHeightInches" name="heightInches" placeholder="10" min="0" max="11">
                                                    <span class="unit-label">in</span>
                                                </div>
                                            </div>
                                            <div class="metric-height" id="updateMetricHeight" style="display: none;">
                                                <div class="input-with-unit">
                                                    <input type="number" id="updateHeightCm" name="heightCm" placeholder="170" min="120" max="250">
                                                    <span class="unit-label">cm</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="updateGender">Gender</label>
                                <select id="updateGender" name="gender">
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <button type="submit" class="cta-button">Update Profile</button>
                        </form>
                    </div>
                    
                    <!-- Goals Tab -->
                    <div class="tab-content" id="goalsTab">
                        <form id="goalsUpdateForm">
                            <div class="form-group">
                                <label for="updateGoalWeight">Goal Weight</label>
                                <div class="input-with-unit">
                                    <input type="number" id="updateGoalWeight" name="goalWeight" placeholder="140" step="0.1">
                                    <span class="unit-display" id="updateGoalWeightUnit">lbs</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="updateActivityLevel">Activity Level</label>
                                <select id="updateActivityLevel" name="activityLevel">
                                    <option value="">Select your activity level</option>
                                    <option value="sedentary">Mostly sedentary (desk job, little exercise)</option>
                                    <option value="lightly-active">Lightly active (light exercise 1-3 days/week)</option>
                                    <option value="moderately-active">Moderately active (moderate exercise 3-5 days/week)</option>
                                    <option value="very-active">Very active (hard exercise 6-7 days/week)</option>
                                    <option value="inconsistent">Inconsistent (I go through active and less active phases)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="updatePrimaryGoal">Primary Goal</label>
                                <select id="updatePrimaryGoal" name="primaryGoal">
                                    <option value="">Select your primary goal</option>
                                    <option value="lose-fat">Lose fat</option>
                                    <option value="build-muscle">Build muscle</option>
                                    <option value="maintain">Maintain current weight</option>
                                    <option value="general-health">General health and wellness</option>
                                    <option value="just-tracking">Just want to track my habits</option>
                                </select>
                            </div>
                            
                            <div class="calculated-goals">
                                <h4>üìä Calculated Goals</h4>
                                <div class="goal-item">
                                    <span>Daily Calories:</span>
                                    <span id="calculatedCalories">--</span>
                                </div>
                                <div class="goal-item">
                                    <span>Daily Protein:</span>
                                    <span id="calculatedProtein">--</span>
                                </div>
                            </div>
                            
                            <button type="submit" class="cta-button">Update Goals</button>
                        </form>
                    </div>
                    
                    <!-- Preferences Tab -->
                    <div class="tab-content" id="preferencesTab">
                        <div class="preferences-section">
                            <h4>üåô Appearance</h4>
                            <div class="preference-item">
                                <label for="themeToggle">Dark Mode</label>
                                <input type="checkbox" id="themeToggle" name="darkMode">
                            </div>
                        </div>
                        
                        <div class="preferences-section">
                            <h4>üìä Data & Privacy</h4>
                            <div class="preference-item">
                                <label for="dataExport">Export My Data</label>
                                <button type="button" class="secondary-btn" onclick="utils.exportUserData()">
                                    üìÅ Download Data
                                </button>
                            </div>
                        </div>
                        
                        <div class="preferences-section">
                            <h4>üîß Debug & Support</h4>
                            <div class="preference-item">
                                <label>OpenAI API Status</label>
                                <span id="apiStatus" class="status-indicator">Checking...</span>
                            </div>
                            <button type="button" class="secondary-btn" onclick="utils.testOpenAIConnection()">
                                üîç Test AI Connection
                            </button>
                            <div class="preference-item" style="margin-top: 15px;">
                                <label>AI Features Status</label>
                                <span id="langGraphStatus" class="status-indicator">Checking...</span>
                            </div>
                            <button type="button" class="secondary-btn" onclick="utils.testAIConnection()">
                                üß™ Test AI Connection
                            </button>
                            <div class="preference-item" style="margin-top: 15px;">
                                <label>Speech Recognition</label>
                                <span id="speechStatus" class="status-indicator">Checking...</span>
                            </div>
                            <button type="button" class="secondary-btn" onclick="utils.testSpeechRecognition()">
                                üé§ Test Voice Features
                            </button>
                        </div>
                    </div>
                    
                    <!-- Account Tab -->
                    <div class="tab-content" id="accountTab">
                        <div class="account-info">
                            <h4>üìß Account Information</h4>
                            <div class="info-item">
                                <span>Email:</span>
                                <span id="userEmail">--</span>
                            </div>
                            <div class="info-item">
                                <span>Member since:</span>
                                <span id="memberSince">--</span>
                            </div>
                        </div>
                        
                        <div class="account-actions">
                            <h4>üîê Account Actions</h4>
                            <button type="button" class="secondary-btn" onclick="utils.resetPassword()">
                                üîë Reset Password
                            </button>
                            <button type="button" class="danger-btn" onclick="utils.signOut()">
                                üö™ Sign Out
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Area -->
        <div id="notification-area" class="notification-area"></div>
        
        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="loading-spinner hidden">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>
    
    <!-- Application Scripts -->
    <!-- Load configuration and main app script -->
    <script src="firebase-config.js"></script>
    <script src="openai-config.js"></script>
    <script src="nutrition-data.js"></script>
    
    <!-- Load LangGraph components -->
    <script src="../services/speech-service.js"></script>
    <script src="langgraph-client.js"></script>
    
    <script src="app.js"></script>
    <script>
        // Initialize height inputs on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Initialize the onboarding form height inputs
            const heightUnitSelect = document.getElementById('heightUnit');
            if (heightUnitSelect) {
                toggleHeightInputs(); // Initialize the display
            }
            
            // Initialize the profile update form height inputs
            const updateHeightUnitSelect = document.getElementById('updateHeightUnit');
            if (updateHeightUnitSelect) {
                toggleUpdateHeightInputs(); // Initialize the display
            }
        });
    </script>
</body>
</html> 